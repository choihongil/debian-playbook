---

- name: Install packages
  apt:
    name: "{{ item }}"
    state: latest
  with_items:
    - avahi-daemon
    - build-essential
    - cargo
    - cifs-utils
    - curl
    - dh-make
    - git-buildpackage
    - cowbuilder
    - dnsutils
    - docker-ce
    - fish
    - tmux
    - git
    - kubeadm
    - kubectl
    - kubelet
    - nodejs
    - yarn
    - openssh-server
    - python3-dev
    - ripgrep
    - rsync
    - ruby-dev
    - unar
    - vim-nox
    - exuberant-ctags
  become: yes

- name: Install pip packages
  pip:
    name: "{{ item }}"
    executable: "{{ ansible_user_dir }}/.local/bin/pip"
    extra_args: --user
  with_items:
    - ansible
    - httpie
    - mycli
    - pgcli
    - powerline-status
    - ranger-fm
    - you-get
    - youtube_dl

  # /usr/bin/ruby2.3: No such file or directory -- /usr/share/rubygems-integration/all/gems/rake-10.5.0/bin/rake (LoadError)
- name: symbolic link of rake
  file:
    path: /usr/share/rubygems-integration/all/gems/rake-12.3.1/exe
    state: directory
  become: yes

- file:
    src: /usr/bin/rake
    dest: /usr/share/rubygems-integration/all/gems/rake-12.3.1/exe/rake
    state: link
  become: yes

- name: Install gem packages
  gem:
    name: "{{ item }}"
  with_items:
    - package_cloud
    - rubocop
    - rubocop-rspec
